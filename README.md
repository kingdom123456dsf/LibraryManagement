# åŸºäºMVCè®¾è®¡æ¨¡å¼çš„åœ¨çº¿å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ
vue3 + ElementPlus  + Java Servlet

---

## 1. ç¯å¢ƒé…ç½®

### åç«¯ç¯å¢ƒ

| å·¥å…· / æŠ€æœ¯       | ç‰ˆæœ¬      | è¯´æ˜                           |
| ------------- | ------- | ---------------------------- |
| IntelliJ IDEA | 2023    | ä¸»å¼€å‘å·¥å…·ï¼ˆIDEï¼‰                   |
| JDK           | 21.0.5  | Java ç¼–è¯‘å’Œè¿è¡Œç¯å¢ƒ                 |
| Tomcat        | 10.1.36 | Servlet å®¹å™¨ï¼ˆå…¼å®¹ Jakarta EE 9ï¼‰  |
| Jakarta EE    | 9.1     | Java ä¼ä¸šç‰ˆ APIï¼ˆæ”¯æŒ Servlet 5.0ï¼‰ |
| Servlet API   | 5.0.0   | åŸºäº Jakarta å‘½åç©ºé—´çš„ Servlet è§„èŒƒ  |
| Jackson       | æœ€æ–°ç‰ˆ     | ç”¨äº Java å¯¹è±¡ä¸ JSON çš„äº’è½¬         |
| HikariCP      | æœ€æ–°ç‰ˆ     | é«˜æ€§èƒ½æ•°æ®åº“è¿æ¥æ±                     |
| MySQL         | 8.0.39  | åç«¯æ•°æ®åº“                        |

### å‰ç«¯ç¯å¢ƒ

| å·¥å…· / æŠ€æœ¯  | ç‰ˆæœ¬      | è¯´æ˜               |
| -------- | ------- | ---------------- |
| Node.js  | 20.13.1 | JavaScript è¿è¡Œæ—¶ç¯å¢ƒ |
| npm      | 10.5.2  | Node åŒ…ç®¡ç†å·¥å…·       |
| Vue      | 3.x     | ç°ä»£å‰ç«¯æ¡†æ¶           |
| @vue/cli | 5.0.8   | å¿«é€Ÿåˆ›å»º Vue é¡¹ç›®      |

---

## 2. æ€»ä½“è®¾è®¡æ€è·¯

æœ¬ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œç»“åˆ Vue3 + ElementPlus + Java Servlet æ„å»ºï¼Œéµå¾ª MVC æ¨¡å¼ï¼Œæ”¯æŒåŸºæœ¬å€Ÿé˜…åŠŸèƒ½ä¸ç®¡ç†åŠŸèƒ½ã€‚

### ï¼ˆ1ï¼‰MVC ä¸‰å±‚æ¶æ„

* **Entityï¼ˆå®ä½“ç±»ï¼‰**ï¼š

  * å°è£…ç³»ç»Ÿæ ¸å¿ƒä¸šåŠ¡å®ä½“ï¼ˆå¦‚ç”¨æˆ·ã€å›¾ä¹¦ã€å€Ÿé˜…è®°å½•ç­‰ï¼‰ï¼Œæ˜ å°„æ•°æ®åº“ç»“æ„ï¼Œæ”¯æŒæ•°æ®ä¼ è¾“ä¸æŒä¹…åŒ–ã€‚

* **Controllerï¼ˆæ§åˆ¶å™¨ï¼‰**ï¼š

  * Servlet æ¥æ”¶å‰ç«¯è¯·æ±‚ï¼Œè°ƒç”¨ Service å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶é€šè¿‡ Jackson è¿”å› JSON å“åº”ã€‚

* **Viewï¼ˆå‰ç«¯é¡µé¢ï¼‰**ï¼š

  * ä½¿ç”¨ Vue3 + ElementPlus æ„å»ºå“åº”å¼ UIï¼ŒAxios å®ç°å¼‚æ­¥é€šä¿¡ã€‚

---

### ï¼ˆ2ï¼‰å…³é”®æŠ€æœ¯å®ç°

#### åç«¯éƒ¨åˆ†

* Java Servlet + Jakarta EEï¼šå¤„ç†è¯·æ±‚å“åº”ï¼Œæ‹…ä»»æ§åˆ¶å™¨è§’è‰²
* MVC æ¶æ„ï¼šåˆ†ç¦»æ§åˆ¶ã€ä¸šåŠ¡ã€æ•°æ®è®¿é—®
* HikariCPï¼šæ•°æ®åº“è¿æ¥æ± ï¼Œæå‡æ•ˆç‡
* Jacksonï¼šå®ç°å¯¹è±¡ä¸ JSON çš„è½¬æ¢
* Session + Filterï¼šå®ç°ç™»å½•æ§åˆ¶ä¸ä¸­æ–‡ç¼–ç å¤„ç†
* CorsFilterï¼šè·¨åŸŸå“åº”å¤´å¤„ç†
* Listenerï¼šè®°å½• Session çš„åˆ›å»ºä¸é”€æ¯
* MySQLï¼šå­˜å‚¨ç”¨æˆ·ã€å›¾ä¹¦ã€å€Ÿé˜…è®°å½•ç­‰ä¿¡æ¯
* Mavenï¼šé¡¹ç›®ä¾èµ–ç®¡ç†

#### å‰ç«¯éƒ¨åˆ†

* Vue3ï¼šæ„å»º SPA åº”ç”¨
* ElementPlusï¼šç»„ä»¶åº“ï¼ˆè¡¨æ ¼ã€å¼¹çª—ç­‰ï¼‰
* Vue Routerï¼šè·¯ç”±æ§åˆ¶
* Axiosï¼šå¼‚æ­¥ HTTP è¯·æ±‚
* EChartsï¼šå›¾ä¹¦ç»Ÿè®¡å›¾è¡¨å±•ç¤º
* vue.config.jsï¼šé…ç½®æœ¬åœ°ä»£ç†è§£å†³è·¨åŸŸ

---

### ï¼ˆ3ï¼‰æ•°æ®äº¤äº’æµç¨‹

* å‰ç«¯é€šè¿‡ Axios è¯·æ±‚åç«¯ REST æ¥å£ï¼ˆå¦‚ /api/booksã€/api/borrowï¼‰
* åç«¯ Controllerè§£æè¯·æ±‚ï¼Œè°ƒç”¨ Service å±‚æ‰§è¡Œä¸šåŠ¡é€»è¾‘
* Service å±‚é€šè¿‡ DAO æ“ä½œæ•°æ®åº“ï¼Œè¿”å›æ•°æ®æ¨¡å‹ï¼ˆJavaBeanï¼‰
* Controllerå°†ç»“æœå°è£…ä¸º JSONï¼Œå“åº”ç»™å‰ç«¯
* å‰ç«¯æ ¹æ®è¿”å›çš„æ•°æ®åŠ¨æ€æ¸²æŸ“é¡µé¢ï¼ˆå›¾ä¹¦åˆ—è¡¨ã€å¼¹çª—ç­‰ï¼‰

---

### ï¼ˆ4ï¼‰æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### å‰ç«¯æ³¨å†Œç”¨æˆ·ï¼š

* ç”¨æˆ·æ³¨å†Œ / ç™»å½•
* å›¾ä¹¦æµè§ˆã€åˆ†ç±»ç­›é€‰ã€æ¨¡ç³Šæœç´¢ï¼ˆåˆ†é¡µï¼‰
* å€Ÿé˜…å›¾ä¹¦ / æŸ¥çœ‹å€Ÿé˜…ä¿¡æ¯
* ä¸ªäººä¿¡æ¯æŸ¥çœ‹ä¸ä¿®æ”¹

#### åå°ç®¡ç†å‘˜åŠŸèƒ½ï¼š

* ç™»å½•åå°
* å›¾ä¹¦å¢åˆ æ”¹æŸ¥ï¼ˆåˆ†é¡µ + åˆ†ç±»ï¼‰
* æŸ¥çœ‹ç”¨æˆ·å€Ÿé˜…è®°å½•ï¼Œæ‰‹åŠ¨è¿˜ä¹¦
* å›¾ä¹¦ç»Ÿè®¡å›¾è¡¨ï¼ˆæŸ±çŠ¶å›¾ / é¥¼å›¾ï¼‰

---

## 3. æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡

### `users` ç”¨æˆ·è¡¨

| å­—æ®µå      | ç±»å‹      | è¯´æ˜              |
| -------- | ------- | --------------- |
| id       | INT, PK | ç”¨æˆ· IDï¼ˆè‡ªå¢ï¼‰       |
| username | VARCHAR | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰         |
| password | VARCHAR | å¯†ç               |
| role     | VARCHAR | è§’è‰²ï¼šadmin / user |

> âš ï¸ `role` å­—æ®µç”¨äºæƒé™æ§åˆ¶

---

### `books` å›¾ä¹¦è¡¨

| å­—æ®µå         | ç±»å‹      | è¯´æ˜        |
| ----------- | ------- | --------- |
| id          | INT, PK | å›¾ä¹¦ IDï¼ˆè‡ªå¢ï¼‰ |
| title       | VARCHAR | ä¹¦å        |
| author      | VARCHAR | ä½œè€…        |
| isbn        | VARCHAR | ISBN ç¼–å·   |
| description | TEXT    | ç®€ä»‹        |
| available   | BOOLEAN | æ˜¯å¦å¯å€Ÿ      |
| image       | VARCHAR | å°é¢å›¾åœ°å€     |
| category    | VARCHAR | å›¾ä¹¦åˆ†ç±»      |

> âš ï¸ `available` ç”¨äºæ§åˆ¶æ˜¯å¦å¯å€Ÿï¼›`category` ä¾¿äºåˆ†ç±»ç­›é€‰ã€‚

---

### `borrow_records` å€Ÿé˜…è®°å½•è¡¨

| å­—æ®µå          | ç±»å‹       | è¯´æ˜                 |
| ------------ | -------- | ------------------ |
| id           | INT, PK  | å€Ÿé˜…è®°å½• IDï¼ˆè‡ªå¢ï¼‰        |
| user\_id     | INT, FK  | å€Ÿé˜…äºº IDï¼ˆå…³è” users è¡¨ï¼‰ |
| book\_id     | INT, FK  | å›¾ä¹¦ IDï¼ˆå…³è” books è¡¨ï¼‰  |
| borrow\_time | DATETIME | å€Ÿé˜…æ—¶é—´               |
| return\_time | DATETIME | å½’è¿˜æ—¶é—´ï¼ˆå¯ä¸ºç©ºï¼‰          |
| returned     | BOOLEAN  | æ˜¯å¦å½’è¿˜               |

> ğŸ’¡ é€šè¿‡è¯¥è¡¨å®ç°ç”¨æˆ·ä¸å›¾ä¹¦çš„å¤šå¯¹å¤šå…³è”å…³ç³»

---
*ä¸€æœ¬ä¹¦å¯ä»¥æä¾›å¤šæ¡å€Ÿé˜…è®°å½•ï¼Œä¸€åç”¨æˆ·ä¹Ÿå¯ä»¥å€Ÿé˜…å¤šæœ¬å›¾ä¹¦ã€‚
![image](https://github.com/user-attachments/assets/a6ee2291-bf79-42c8-959d-df4530215de7)

---


## 4. MVC è®¾è®¡æ¨¡å¼è¯¦ç»†è®¾è®¡

æœ¬ç³»ç»Ÿåç«¯éµå¾ªæ ‡å‡† **MVC æ¶æ„** åˆ†å±‚è®¾è®¡ï¼š

* **Entity (JavaBean)**ï¼šè´Ÿè´£æ•°æ®ä¼ è¾“ï¼Œå°è£…æ•°æ®åº“æ˜ å°„å¯¹è±¡ã€‚
* **Controller**ï¼šå¤„ç†è¯·æ±‚ä¸å“åº”ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘ã€‚
* **Service**ï¼šå°è£…ä¸šåŠ¡é€»è¾‘ã€‚
* **DAO (Data Access Object)**ï¼šå¤„ç†æ•°æ®åº“äº¤äº’ã€‚
* **View**ï¼šè´Ÿè´£ç”¨æˆ·ç•Œé¢å±•ç¤ºï¼ŒåŒ…å«ç™»å½•ã€æ³¨å†Œã€å›¾ä¹¦å±•ç¤ºç­‰æ¨¡å—ã€‚

---

### ï¼ˆ1ï¼‰Entity å®ä½“å±‚

| å®ä½“ç±»            | å¯¹åº”æ•°æ®åº“è¡¨                 |
| -------------- | ---------------------- |
| `User`         | `users` ç”¨æˆ·è¡¨            |
| `Book`         | `books` å›¾ä¹¦è¡¨            |
| `BorrowRecord` | `borrow_records` å€Ÿé˜…è®°å½•è¡¨ |

---

### ï¼ˆ2ï¼‰Controller æ§åˆ¶å™¨å±‚

| æ§åˆ¶å™¨ç±»                           | è·¯å¾„                               | åŠŸèƒ½æè¿°                   |
| ------------------------------ | -------------------------------- | ---------------------- |
| `LoginController`              | `/api/login`                     | ç”¨æˆ·ç™»å½•éªŒè¯ï¼Œåˆ›å»ºä¼šè¯ï¼ˆSessionï¼‰   |
| `RegisterController`           | `/api/register`                  | ç”¨æˆ·æ³¨å†Œï¼Œæ£€æŸ¥ç”¨æˆ·åå”¯ä¸€æ€§          |
| `LogoutController`             | `/api/logout`                    | ç”¨æˆ·é€€å‡ºç™»å½•ï¼Œé”€æ¯ä¼šè¯            |
| `UserInfoController`           | `/api/user-info`                 | è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨æˆ·åã€è§’è‰²ï¼‰     |
| `UpdateUserController`         | `/api/update-user`               | ç”¨æˆ·ä¿®æ”¹ç”¨æˆ·åæˆ–å¯†ç              |
| `BookController`               | `/api/books`                     | ç”¨æˆ·å›¾ä¹¦åˆ—è¡¨æŸ¥è¯¢ï¼ˆåˆ†é¡µã€æ¨¡ç³ŠæŸ¥è¯¢ã€åˆ†ç±»è¿‡æ»¤ï¼‰ |
| `BorrowController`             | `/api/borrow`                    | å›¾ä¹¦å€Ÿé˜…åŠŸèƒ½ï¼ˆæ£€æŸ¥çŠ¶æ€ã€å€Ÿé˜…é€»è¾‘ï¼‰      |
| `MyBorrowsController`          | `/api/my-borrows`                | å½“å‰ç”¨æˆ·å€Ÿé˜…è®°å½•æŸ¥è¯¢             |
| `AdminUserController`          | `/api/admin/users`               | ç®¡ç†å‘˜æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯            |
| `AdminBookController`          | `/api/admin/books`               | ç®¡ç†å‘˜å¢åˆ æ”¹æŸ¥å›¾ä¹¦ä¿¡æ¯            |
| `AdminBorrowRecordsController` | `/api/admin/borrow-records`      | ç®¡ç†å‘˜æŸ¥çœ‹æŒ‡å®šç”¨æˆ·å€Ÿé˜…è®°å½•          |
| `AdminReturnController`        | `/api/admin/return`              | ç®¡ç†å‘˜æ‰§è¡Œè¿˜ä¹¦æ“ä½œ              |
| `AdminStatController`          | `/api/admin/stat/category-count` | å›¾ä¹¦åˆ†ç±»ç»Ÿè®¡åˆ†æ               |

---

### ï¼ˆ3ï¼‰Service ä¸šåŠ¡é€»è¾‘å±‚

| Service ç±»             | åŠŸèƒ½æè¿°          |
| --------------------- | ------------- |
| `UserService`         | ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æ›´æ–°ç­‰é€»è¾‘ |
| `BookService`         | å›¾ä¹¦æŸ¥è¯¢ã€åˆ†ç±»ã€åˆ†é¡µç­‰é€»è¾‘ |
| `BorrowBookService`   | å€Ÿé˜…å›¾ä¹¦é€»è¾‘å¤„ç†      |
| `BorrowRecordService` | å€Ÿé˜…è®°å½•æŸ¥çœ‹ã€è¿˜ä¹¦å¤„ç†   |
| `StatService`         | å›¾ä¹¦åˆ†ç±»ç»Ÿè®¡æœåŠ¡é€»è¾‘    |

---

### ï¼ˆ4ï¼‰DAO æ•°æ®è®¿é—®å±‚

| DAO ç±»             | è¯´æ˜                        |
| ----------------- | ------------------------- |
| `UserDao`         | æ“ä½œ `users` ç”¨æˆ·è¡¨            |
| `BookDao`         | æ“ä½œ `books` å›¾ä¹¦è¡¨            |
| `BorrowRecordDao` | æ“ä½œ `borrow_records` å€Ÿé˜…è®°å½•è¡¨ |
| `StatDao`         | ç»Ÿè®¡å›¾ä¹¦åˆ†ç±»æ•°æ®                  |

---

### ï¼ˆ5ï¼‰View è¡¨ç°å±‚

| Vue é¡µé¢ç»„ä»¶         | åŠŸèƒ½é¡µé¢         |
| ---------------- | ------------ |
| `LoginView`      | ç™»å½•ç•Œé¢         |
| `RegisterView`   | æ³¨å†Œç•Œé¢         |
| `BookList`       | ç”¨æˆ·ç™»å½•åçš„å›¾ä¹¦å±•ç¤ºé¡µé¢ |
| `MyBorrows`      | ç”¨æˆ·å€Ÿé˜…ä¿¡æ¯ç•Œé¢     |
| `ProfileView`    | ä¸ªäººä¿¡æ¯æŸ¥çœ‹ä¸ä¿®æ”¹é¡µé¢  |
| `AdminDashboard` | ç®¡ç†å‘˜åå°ä¸»é¡µé¢     |

![åŒ…å›¾](https://github.com/user-attachments/assets/894fc44b-5035-46e8-8f8d-767c19ec7b7c)

---

## 5. ç³»ç»Ÿæ—¶åºå›¾

### ğŸ“˜ ç”¨æˆ·ç«¯æ—¶åºè¯´æ˜

* ç”¨æˆ·ç™»å½•/æ³¨å†Œåè¿›å…¥å›¾ä¹¦åˆ—è¡¨ç•Œé¢ï¼›
* æ”¯æŒæ¨¡ç³Šæœç´¢ã€åˆ†ç±»ç­›é€‰ã€å›¾ä¹¦è¯¦æƒ…æŸ¥çœ‹ï¼›
* å¯å€Ÿé˜…å›¾ä¹¦ï¼Œå€Ÿå‡ºåçŠ¶æ€è®¾ä¸ºâ€œä¸å¯å€Ÿâ€ï¼›
* ç”¨æˆ·å¤´åƒä¸‹æ‹‰èœå•å¯è®¿é—®ï¼šå€Ÿé˜…è®°å½•ã€ä¸ªäººä¿¡æ¯ä¿®æ”¹ç­‰ã€‚

#### å›¾ä¹¦ç®¡ç†ç³»ç»Ÿç”¨æˆ·ç«¯æ—¶åºå›¾

![ç”¨æˆ·ç«¯æ—¶åºå›¾ï¼ˆæ§åˆ¶ç„¦ç‚¹å®Œæ•´ï¼‰](https://github.com/user-attachments/assets/cd24a5b3-1dc4-4485-a320-bf0b7a8b73e1)

---

### ğŸ›  ç®¡ç†å‘˜ç«¯æ—¶åºè¯´æ˜

* ç®¡ç†å‘˜ç™»å½•åè¿›å…¥åå°ï¼›
* å¯ç®¡ç†å›¾ä¹¦ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€æŸ¥çœ‹ç”¨æˆ·ä¸å€Ÿé˜…ä¿¡æ¯ï¼›
* å¯æ‰‹åŠ¨æ‰§è¡Œè¿˜ä¹¦æ“ä½œï¼›
* æ”¯æŒæŸ¥çœ‹å›¾ä¹¦åˆ†ç±»ç»Ÿè®¡å›¾è¡¨ï¼ˆæŸ±çŠ¶å›¾/é¥¼å›¾ï¼‰ã€‚

#### å›¾ä¹¦ç®¡ç†ç³»ç»Ÿç®¡ç†å‘˜ç«¯æ—¶åºå›¾

![ç®¡ç†å‘˜ç«¯æ—¶åºå›¾ï¼ˆæ§åˆ¶ç„¦ç‚¹å®Œæ•´ï¼‰](https://github.com/user-attachments/assets/d6dfe874-dce8-4b8e-a395-b276f65ac802)

---


## 6. å‰ç«¯é¡¹ç›®æ¶æ„æ­å»º

### ğŸ”§ åˆ›å»ºå‰ç«¯é¡¹ç›®

åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ– Vue3 é¡¹ç›®ï¼š

```bash
vue create frontend
```

> é€‰æ‹©é…ç½®æ—¶é€‰æ‹© **Vue3** å’Œ **Routerã€Piniaã€TypeScriptï¼ˆå¯é€‰ï¼‰**

---

### ğŸ“ ç›®å½•ç»“æ„ç¤ºæ„

```
frontend/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/         # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components/     # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ views/          # é¡µé¢ç»„ä»¶ï¼ˆLoginViewã€BookList ç­‰ï¼‰
â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ utils/          # å·¥å…·ç±»ï¼Œå¦‚ request.js
â”‚   â””â”€â”€ App.vue
â”œâ”€â”€ package.json
â””â”€â”€ vue.config.js       # æœ¬åœ°ä»£ç†é…ç½®
```

---

### â–¶ï¸ å¯åŠ¨å‰ç«¯é¡¹ç›®

åœ¨å‰ç«¯é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

```bash
npm install
npm run serve
```

---


